domain = c(0, 1),
autorange = TRUE,
showticklabels = FALSE
),
autosize = TRUE,
showlegend = TRUE,
colors = "Set1"
)
p <- plot_ly()
p <- add_trace(p, uid=trace1$uid, type=trace1$type, x=trace1$x, y=trace1$y, orientation=trace1$orientation, name = trace1$name)
p <- add_trace(p, uid=trace2$uid, type=trace2$type, x=trace2$x, y=trace2$y, xaxis=trace2$xaxis, yaxis=trace2$yaxis, name = trace2$name, orientation=trace2$orientation)
p <- layout(p, title=layout$title, width=layout$width, xaxis=layout$xaxis, yaxis=layout$yaxis, height=layout$height, xaxis2=layout$xaxis2, yaxis2=layout$yaxis2, autosize=layout$autosize, showlegend=layout$showlegend)
p
p <- plot_ly()
p <- add_trace(p, uid=trace1$uid, type=trace1$type, x=trace1$x, y=trace1$y, orientation=trace1$orientation, name = trace1$name)
p <- add_trace(p, uid=trace2$uid, type=trace2$type, x=trace2$x, y=trace2$y, xaxis=trace2$xaxis, yaxis=trace2$yaxis, name = trace2$name, orientation=trace2$orientation)
p <- layout(p, title=layout$title, width=layout$width, xaxis=layout$xaxis, yaxis=layout$yaxis, height=layout$height, xaxis2=layout$xaxis2, yaxis2=layout$yaxis2, autosize=layout$autosize, showlegend=layout$showlegend)
p
p <- plot_ly()
p <- add_trace(p, uid=trace1$uid, type=trace1$type, x=trace1$x, y=trace1$y, orientation=trace1$orientation, name = trace1$name)
p <- add_trace(p, uid=trace2$uid, type=trace2$type, x=trace2$x, y=trace2$y, xaxis=trace2$xaxis, yaxis=trace2$yaxis, name = trace2$name, orientation=trace2$orientation)
p <- layout(p, title=layout$title, width=layout$width, xaxis=layout$xaxis, yaxis=layout$yaxis, height=layout$height, xaxis2=layout$xaxis2, yaxis2=layout$yaxis2, autosize=layout$autosize, showlegend=layout$showlegend)
p
trace1 <- list(
name = pilots_standings[1,]$fullname,
type = "bar",
x = c(pilots_standings[1,]$wins, pilots_standings[1,]$poles,
pilots_standings[1,]$fastestLaps, pilots_standings[1,]$pts,
pilots_standings[1,]$podiums, pilots_standings[1,]$dnfs),
y = c("Wins", "Poles", "Fastest Laps", "Avg. Points", "Podiums", "DNF"),
orientation = "h"
)
trace2 <- list(
name = pilots_standings[2,]$fullname,
type = "bar",
x = c(pilots_standings[2,]$wins, pilots_standings[2,]$poles,
pilots_standings[2,]$fastestLaps, pilots_standings[1,]$pts,
pilots_standings[2,]$podiums, pilots_standings[2,]$dnfs),
y = c("Wins", "Poles", "Fastest Laps", "Avg. Points", "Podiums", "DNF"),
xaxis = "x2",
yaxis = "y2",
orientation = "h"
)
layout <- list(
title = "Tornado Chart",
xaxis = list(
type = "linear",
range = c(22, 0),
domain = c(0, 0.5),
autorange = TRUE,
showticklabels = FALSE
),
yaxis = list(
type = "category",
autorange = TRUE
),
xaxis2 = list(
type = "linear",
range = c(0, 22),
anchor = "y2",
domain = c(0.5, 1),
autorange = TRUE,
showticklabels = FALSE
),
yaxis2 = list(
type = "category",
anchor = "x2",
domain = c(0, 1),
autorange = TRUE,
showticklabels = FALSE
),
autosize = TRUE,
showlegend = TRUE,
colors = "Set1"
)
p <- plot_ly()
p <- add_trace(p, uid=trace1$uid, type=trace1$type, x=trace1$x, y=trace1$y,
orientation=trace1$orientation, name = trace1$name)
p <- add_trace(p, uid=trace2$uid, type=trace2$type, x=trace2$x, y=trace2$y, xaxis=trace2$xaxis,
yaxis=trace2$yaxis, name = trace2$name, orientation=trace2$orientation)
p <- layout(p, title=layout$title, width=layout$width, xaxis=layout$xaxis, yaxis=layout$yaxis,
height=layout$height, xaxis2=layout$xaxis2, yaxis2=layout$yaxis2, autosize=layout$autosize,
showlegend=layout$showlegend, colors=layout$colors)
p
trace1 <- list(
name = pilots_standings[1,]$fullname,
type = "bar",
x = c(pilots_standings[1,]$wins, pilots_standings[1,]$poles,
pilots_standings[1,]$fastestLaps, pilots_standings[1,]$pts,
pilots_standings[1,]$podiums, pilots_standings[1,]$dnfs),
y = c("Wins", "Poles", "Fastest Laps", "Avg. Points", "Podiums", "DNF"),
orientation = "h"
)
trace2 <- list(
name = pilots_standings[2,]$fullname,
type = "bar",
x = c(pilots_standings[2,]$wins, pilots_standings[2,]$poles,
pilots_standings[2,]$fastestLaps, pilots_standings[1,]$pts,
pilots_standings[2,]$podiums, pilots_standings[2,]$dnfs),
y = c("Wins", "Poles", "Fastest Laps", "Avg. Points", "Podiums", "DNF"),
xaxis = "x2",
yaxis = "y2",
orientation = "h"
)
layout <- list(
title = "Tornado Chart",
xaxis = list(
type = "linear",
range = c(22, 0),
domain = c(0, 0.5),
autorange = TRUE,
showticklabels = FALSE
),
yaxis = list(
type = "category",
autorange = TRUE
),
xaxis2 = list(
type = "linear",
range = c(0, 22),
anchor = "y2",
domain = c(0.5, 1),
autorange = TRUE,
showticklabels = FALSE
),
yaxis2 = list(
type = "category",
anchor = "x2",
domain = c(0, 1),
autorange = TRUE,
showticklabels = FALSE
),
autosize = TRUE,
showlegend = TRUE,
color = "Set1"
)
p <- plot_ly()
p <- add_trace(p, uid=trace1$uid, type=trace1$type, x=trace1$x, y=trace1$y,
orientation=trace1$orientation, name = trace1$name)
p <- add_trace(p, uid=trace2$uid, type=trace2$type, x=trace2$x, y=trace2$y, xaxis=trace2$xaxis,
yaxis=trace2$yaxis, name = trace2$name, orientation=trace2$orientation)
p <- layout(p, title=layout$title, width=layout$width, xaxis=layout$xaxis, yaxis=layout$yaxis,
height=layout$height, xaxis2=layout$xaxis2, yaxis2=layout$yaxis2, autosize=layout$autosize,
showlegend=layout$showlegend, color=layout$color)
p
p <- plot_ly(colors = "Set1")
p <- add_trace(p, uid=trace1$uid, type=trace1$type, x=trace1$x, y=trace1$y,
orientation=trace1$orientation, name = trace1$name)
p <- add_trace(p, uid=trace2$uid, type=trace2$type, x=trace2$x, y=trace2$y, xaxis=trace2$xaxis,
yaxis=trace2$yaxis, name = trace2$name, orientation=trace2$orientation)
p <- layout(p, title=layout$title, width=layout$width, xaxis=layout$xaxis, yaxis=layout$yaxis,
height=layout$height, xaxis2=layout$xaxis2, yaxis2=layout$yaxis2, autosize=layout$autosize,
showlegend=layout$showlegend)
p
p <- plot_ly(colors = "Set1")
p <- add_trace(p, uid=trace1$uid, type=trace1$type, x=trace1$x, y=trace1$y,
orientation=trace1$orientation, name = trace1$name)
p <- add_trace(p, uid=trace2$uid, type=trace2$type, x=trace2$x, y=trace2$y, xaxis=trace2$xaxis,
yaxis=trace2$yaxis, name = trace2$name, orientation=trace2$orientation)
p <- layout(p, title=layout$title, width=layout$width, xaxis=layout$xaxis, yaxis=layout$yaxis,
height=layout$height, xaxis2=layout$xaxis2, yaxis2=layout$yaxis2, autosize=layout$autosize,
showlegend=layout$showlegend)
p
p <- plot_ly(colors = "Set2")
p <- add_trace(p, uid=trace1$uid, type=trace1$type, x=trace1$x, y=trace1$y,
orientation=trace1$orientation, name = trace1$name)
p <- add_trace(p, uid=trace2$uid, type=trace2$type, x=trace2$x, y=trace2$y, xaxis=trace2$xaxis,
yaxis=trace2$yaxis, name = trace2$name, orientation=trace2$orientation)
p <- layout(p, title=layout$title, width=layout$width, xaxis=layout$xaxis, yaxis=layout$yaxis,
height=layout$height, xaxis2=layout$xaxis2, yaxis2=layout$yaxis2, autosize=layout$autosize,
showlegend=layout$showlegend)
p
p <- plot_ly(colors = "Set2")
p <- add_trace(p, uid=trace1$uid, type=trace1$type, x=trace1$x, y=trace1$y,
orientation=trace1$orientation, name = trace1$name)
p <- add_trace(p, uid=trace2$uid, type=trace2$type, x=trace2$x, y=trace2$y, xaxis=trace2$xaxis,
yaxis=trace2$yaxis, name = trace2$name, orientation=trace2$orientation)
p <- layout(p, title=layout$title, width=layout$width, xaxis=layout$xaxis, yaxis=layout$yaxis,
height=layout$height, xaxis2=layout$xaxis2, yaxis2=layout$yaxis2, autosize=layout$autosize,
showlegend=layout$showlegend)
p
p <- plot_ly(colors = "Set2")
p <- add_trace(p, uid=trace1$uid, type=trace1$type, x=trace1$x, y=trace1$y,
orientation=trace1$orientation, name = trace1$name)
p <- add_trace(p, uid=trace2$uid, type=trace2$type, x=trace2$x, y=trace2$y, xaxis=trace2$xaxis,
yaxis=trace2$yaxis, name = trace2$name, orientation=trace2$orientation)
p <- layout(p, title=layout$title, width=layout$width, xaxis=layout$xaxis, yaxis=layout$yaxis,
height=layout$height, xaxis2=layout$xaxis2, yaxis2=layout$yaxis2, autosize=layout$autosize,
showlegend=layout$showlegend)
p
library(tidyr)
library(dplyr)
library(plotly)
drivers <- readr::read_csv("data/drivers.csv")
races <- readr::read_csv("data/races.csv")
results <- readr::read_csv("data/results.csv")
circuits <- readr::read_csv("data/circuits.csv")
laps <- readr::read_csv("data/lap_times.csv")
pilots_standings <- results %>%
inner_join(drivers, by = "driverId") %>%
inner_join(races, by = "raceId") %>%
filter(year == 2022) %>%
mutate(fullname = paste(forename, surname, sep = " ")) %>%
group_by(fullname) %>%
mutate(wins = sum(position == 1)) %>%
mutate(poles = sum(grid == 1)) %>%
mutate(fastestLaps = sum(rank == 1)) %>%
mutate(podiums = sum(position == 1 | position == 2 | position == 3)) %>%
mutate(dnfs = sum(position == "\\N")) %>%
mutate(pts = round(sum(points)/22, 1)) %>%
filter(fullname == "Max Verstappen" | fullname == "Charles Leclerc") %>%
select(fullname, wins, poles, pts, fastestLaps, podiums, dnfs) %>%
distinct
trace1 <- list(
name = pilots_standings[1,]$fullname,
type = "bar",
x = c(pilots_standings[1,]$wins, pilots_standings[1,]$poles,
pilots_standings[1,]$fastestLaps, pilots_standings[1,]$pts,
pilots_standings[1,]$podiums, pilots_standings[1,]$dnfs),
y = c("Wins", "Poles", "Fastest Laps", "Avg. Points", "Podiums", "DNF"),
marker = "red",
orientation = "h"
)
trace2 <- list(
name = pilots_standings[2,]$fullname,
type = "bar",
x = c(pilots_standings[2,]$wins, pilots_standings[2,]$poles,
pilots_standings[2,]$fastestLaps, pilots_standings[1,]$pts,
pilots_standings[2,]$podiums, pilots_standings[2,]$dnfs),
y = c("Wins", "Poles", "Fastest Laps", "Avg. Points", "Podiums", "DNF"),
marker ="lightblue",
xaxis = "x2",
yaxis = "y2",
orientation = "h"
)
layout <- list(
title = "Tornado Chart",
xaxis = list(
type = "linear",
range = c(22, 0),
domain = c(0, 0.5),
autorange = TRUE,
showticklabels = FALSE
),
yaxis = list(
type = "category",
autorange = TRUE
),
xaxis2 = list(
type = "linear",
range = c(0, 22),
anchor = "y2",
domain = c(0.5, 1),
autorange = TRUE,
showticklabels = FALSE
),
yaxis2 = list(
type = "category",
anchor = "x2",
domain = c(0, 1),
autorange = TRUE,
showticklabels = FALSE
),
autosize = TRUE,
showlegend = TRUE,
)
library(tidyr)
library(dplyr)
library(plotly)
drivers <- readr::read_csv("data/drivers.csv")
races <- readr::read_csv("data/races.csv")
results <- readr::read_csv("data/results.csv")
circuits <- readr::read_csv("data/circuits.csv")
laps <- readr::read_csv("data/lap_times.csv")
pilots_standings <- results %>%
inner_join(drivers, by = "driverId") %>%
inner_join(races, by = "raceId") %>%
filter(year == 2022) %>%
mutate(fullname = paste(forename, surname, sep = " ")) %>%
group_by(fullname) %>%
mutate(wins = sum(position == 1)) %>%
mutate(poles = sum(grid == 1)) %>%
mutate(fastestLaps = sum(rank == 1)) %>%
mutate(podiums = sum(position == 1 | position == 2 | position == 3)) %>%
mutate(dnfs = sum(position == "\\N")) %>%
mutate(pts = round(sum(points)/22, 1)) %>%
filter(fullname == "Max Verstappen" | fullname == "Charles Leclerc") %>%
select(fullname, wins, poles, pts, fastestLaps, podiums, dnfs) %>%
distinct
trace1 <- list(
name = pilots_standings[1,]$fullname,
type = "bar",
x = c(pilots_standings[1,]$wins, pilots_standings[1,]$poles,
pilots_standings[1,]$fastestLaps, pilots_standings[1,]$pts,
pilots_standings[1,]$podiums, pilots_standings[1,]$dnfs),
y = c("Wins", "Poles", "Fastest Laps", "Avg. Points", "Podiums", "DNF"),
marker = "red",
orientation = "h"
)
trace2 <- list(
name = pilots_standings[2,]$fullname,
type = "bar",
x = c(pilots_standings[2,]$wins, pilots_standings[2,]$poles,
pilots_standings[2,]$fastestLaps, pilots_standings[1,]$pts,
pilots_standings[2,]$podiums, pilots_standings[2,]$dnfs),
y = c("Wins", "Poles", "Fastest Laps", "Avg. Points", "Podiums", "DNF"),
marker ="lightblue",
xaxis = "x2",
yaxis = "y2",
orientation = "h"
)
layout <- list(
title = "Tornado Chart",
xaxis = list(
type = "linear",
range = c(22, 0),
domain = c(0, 0.5),
autorange = TRUE,
showticklabels = FALSE
),
yaxis = list(
type = "category",
autorange = TRUE
),
xaxis2 = list(
type = "linear",
range = c(0, 22),
anchor = "y2",
domain = c(0.5, 1),
autorange = TRUE,
showticklabels = FALSE
),
yaxis2 = list(
type = "category",
anchor = "x2",
domain = c(0, 1),
autorange = TRUE,
showticklabels = FALSE
),
autosize = TRUE,
showlegend = TRUE,
)
library(tidyr)
library(dplyr)
library(plotly)
drivers <- readr::read_csv("data/drivers.csv")
races <- readr::read_csv("data/races.csv")
results <- readr::read_csv("data/results.csv")
circuits <- readr::read_csv("data/circuits.csv")
laps <- readr::read_csv("data/lap_times.csv")
pilots_standings <- results %>%
inner_join(drivers, by = "driverId") %>%
inner_join(races, by = "raceId") %>%
filter(year == 2022) %>%
mutate(fullname = paste(forename, surname, sep = " ")) %>%
group_by(fullname) %>%
mutate(wins = sum(position == 1)) %>%
mutate(poles = sum(grid == 1)) %>%
mutate(fastestLaps = sum(rank == 1)) %>%
mutate(podiums = sum(position == 1 | position == 2 | position == 3)) %>%
mutate(dnfs = sum(position == "\\N")) %>%
mutate(pts = round(sum(points)/22, 1)) %>%
filter(fullname == "Max Verstappen" | fullname == "Charles Leclerc") %>%
select(fullname, wins, poles, pts, fastestLaps, podiums, dnfs) %>%
distinct
trace1 <- list(
name = pilots_standings[1,]$fullname,
type = "bar",
x = c(pilots_standings[1,]$wins, pilots_standings[1,]$poles,
pilots_standings[1,]$fastestLaps, pilots_standings[1,]$pts,
pilots_standings[1,]$podiums, pilots_standings[1,]$dnfs),
y = c("Wins", "Poles", "Fastest Laps", "Avg. Points", "Podiums", "DNF"),
marker = "red",
orientation = "h"
)
trace2 <- list(
name = pilots_standings[2,]$fullname,
type = "bar",
x = c(pilots_standings[2,]$wins, pilots_standings[2,]$poles,
pilots_standings[2,]$fastestLaps, pilots_standings[1,]$pts,
pilots_standings[2,]$podiums, pilots_standings[2,]$dnfs),
y = c("Wins", "Poles", "Fastest Laps", "Avg. Points", "Podiums", "DNF"),
marker ="lightblue",
xaxis = "x2",
yaxis = "y2",
orientation = "h"
)
layout <- list(
title = "Tornado Chart",
xaxis = list(
type = "linear",
range = c(22, 0),
domain = c(0, 0.5),
autorange = TRUE,
showticklabels = FALSE
),
yaxis = list(
type = "category",
autorange = TRUE
),
xaxis2 = list(
type = "linear",
range = c(0, 22),
anchor = "y2",
domain = c(0.5, 1),
autorange = TRUE,
showticklabels = FALSE
),
yaxis2 = list(
type = "category",
anchor = "x2",
domain = c(0, 1),
autorange = TRUE,
showticklabels = FALSE
),
autosize = TRUE,
showlegend = TRUE
)
p <- plot_ly()
p <- add_trace(p, uid=trace1$uid, type=trace1$type, x=trace1$x, y=trace1$y,
orientation=trace1$orientation, marker = trace1$marker, name = trace1$name)
p <- add_trace(p, uid=trace2$uid, type=trace2$type, x=trace2$x, y=trace2$y, xaxis=trace2$xaxis,
yaxis=trace2$yaxis, marker = trace2$marker, name = trace2$name, orientation=trace2$orientation)
p <- layout(p, title=layout$title, width=layout$width, xaxis=layout$xaxis, yaxis=layout$yaxis,
height=layout$height, xaxis2=layout$xaxis2, yaxis2=layout$yaxis2, autosize=layout$autosize,
showlegend=layout$showlegend)
p
library(tidyr)
library(dplyr)
library(plotly)
drivers <- readr::read_csv("data/drivers.csv")
races <- readr::read_csv("data/races.csv")
results <- readr::read_csv("data/results.csv")
circuits <- readr::read_csv("data/circuits.csv")
laps <- readr::read_csv("data/lap_times.csv")
pilots_standings <- results %>%
inner_join(drivers, by = "driverId") %>%
inner_join(races, by = "raceId") %>%
filter(year == 2022) %>%
mutate(fullname = paste(forename, surname, sep = " ")) %>%
group_by(fullname) %>%
mutate(wins = sum(position == 1)) %>%
mutate(poles = sum(grid == 1)) %>%
mutate(fastestLaps = sum(rank == 1)) %>%
mutate(podiums = sum(position == 1 | position == 2 | position == 3)) %>%
mutate(dnfs = sum(position == "\\N")) %>%
mutate(pts = round(sum(points)/22, 1)) %>%
filter(fullname == "Max Verstappen" | fullname == "Charles Leclerc") %>%
select(fullname, wins, poles, pts, fastestLaps, podiums, dnfs) %>%
distinct
trace1 <- list(
name = pilots_standings[1,]$fullname,
type = "bar",
x = c(pilots_standings[1,]$wins, pilots_standings[1,]$poles,
pilots_standings[1,]$fastestLaps, pilots_standings[1,]$pts,
pilots_standings[1,]$podiums, pilots_standings[1,]$dnfs),
y = c("Wins", "Poles", "Fastest Laps", "Avg. Points", "Podiums", "DNF"),
marker = list(color = "red"),
orientation = "h"
)
trace2 <- list(
name = pilots_standings[2,]$fullname,
type = "bar",
x = c(pilots_standings[2,]$wins, pilots_standings[2,]$poles,
pilots_standings[2,]$fastestLaps, pilots_standings[1,]$pts,
pilots_standings[2,]$podiums, pilots_standings[2,]$dnfs),
y = c("Wins", "Poles", "Fastest Laps", "Avg. Points", "Podiums", "DNF"),
marker = list(color = "lightblue"),
xaxis = "x2",
yaxis = "y2",
orientation = "h"
)
layout <- list(
title = "Tornado Chart",
xaxis = list(
type = "linear",
range = c(22, 0),
domain = c(0, 0.5),
autorange = TRUE,
showticklabels = FALSE
),
yaxis = list(
type = "category",
autorange = TRUE
),
xaxis2 = list(
type = "linear",
range = c(0, 22),
anchor = "y2",
domain = c(0.5, 1),
autorange = TRUE,
showticklabels = FALSE
),
yaxis2 = list(
type = "category",
anchor = "x2",
domain = c(0, 1),
autorange = TRUE,
showticklabels = FALSE
),
autosize = TRUE,
showlegend = TRUE
)
p <- plot_ly()
p <- add_trace(p, uid=trace1$uid, type=trace1$type, x=trace1$x, y=trace1$y,
orientation=trace1$orientation, marker = trace1$marker, name = trace1$name)
p <- add_trace(p, uid=trace2$uid, type=trace2$type, x=trace2$x, y=trace2$y, xaxis=trace2$xaxis,
yaxis=trace2$yaxis, marker = trace2$marker, name = trace2$name, orientation=trace2$orientation)
p <- layout(p, title=layout$title, width=layout$width, xaxis=layout$xaxis, yaxis=layout$yaxis,
height=layout$height, xaxis2=layout$xaxis2, yaxis2=layout$yaxis2, autosize=layout$autosize,
showlegend=layout$showlegend)
p
